{"version":3,"file":"HttpApiBuilder.js","names":["Cause","Chunk","Context","Effect","Encoding","Fiber","identity","globalValue","Layer","ManagedRuntime","Option","ParseResult","pipeArguments","Redacted","Schema","unify","HttpApi","HttpApiDecodeError","HttpApiMiddleware","HttpApiSchema","HttpApp","HttpMethod","HttpMiddleware","HttpRouter","HttpServer","HttpServerRequest","HttpServerResponse","OpenApi","UrlParams","Router","Tag","api","effect","Api","map","context","serve","middleware","httpApp","pipe","app","unwrapEffect","provide","Live","Middleware","layer","gen","makeMiddlewareMap","middlewares","router","applyMiddleware","apiMiddlewareService","apiMiddleware","retrieve","errorSchema","makeErrorSchema","encodeError","encodeUnknown","catchAllCause","cause","matchEffect","squash","onFailure","failCause","onSuccess","succeed","toWebHandler","options","runtime","make","mergeAll","memoMap","handlerCached","handlerPromise","rt","runtimeEffect","handler","toWebHandlerRuntime","runPromise","request","undefined","then","dispose","HandlersTypeId","Symbol","for","HandlersProto","_Endpoints","arguments","handle","name","endpoint","group","endpoints","makeHandlers","handlers","append","withFullResponse","uninterruptible","handleRaw","self","Object","create","groupName","build","use","groups","result","empty","isEffect","groupMiddleware","routes","item","push","handlerToRoute","mapInputContext","input","merge","concat","fromIterable","_api","_groupName","_name","f","requestPayload","urlParams","hasBody","method","contentType","headers","toLowerCase","trim","includes","orDie","json","multipart","urlParamsBody","toRecord","startsWith","text","arrayBuffer","buffer","Uint8Array","initial","Map","forEach","tag","set","key","unsafeGet","isSingleStringType","ast","_tag","ps","propertySignatures","find","type","indexSignatures","some","is","parameter","types","from","normalizeUrlParams","params","out","value","Array","isArray","endpoint_","isFullResponse","decodePath","pathSchema","decodeUnknown","decodePayload","payloadSchema","decodeHeaders","headersSchema","encodeSuccess","encode","makeSuccessSchema","successSchema","makeRoute","path","fiber","getOrThrow","getCurrentFiber","currentContext","httpRequest","routeContext","RouteContext","ParsedSearchParams","payload","flatMap","urlParamsSchema","schema","response","catchIf","isParseError","refailParseError","entry","values","SecurityTypeId","makeSecurityMiddleware","optional","previous","provides","provideService","_","provideServiceEffect","zipRight","securityMiddlewareCache","WeakMap","has","get","security","entries","decode","securityDecode","catchAll","void","responseSchema","declare","isServerResponse","schemas","Set","deunionize","Union","toResponseSuccess","toResponseError","decodeForbidden","__","fail","Forbidden","toResponseSchema","getStatus","cache","schemaToResponse","data","isEmpty","isVoid","to","status","encoding","getEncoding","kind","mapError","error","Type","uint8Array","transform","transformOrFail","getStatusSuccessAST","getStatusErrorAST","sync","of","add","prev","middlewareAdd","service","middlewareAddNoContext","args","apiFirst","isHttpApi","withContext","scopedDiscard","middlewareCors","cors","middlewareOpenApi","spec","fromApi","additionalPropertiesStrategy","bearerLen","length","basicLen","authorization","slice","in","Struct","String","schemaSearchParams","schemaCookies","schemaHeaders","match","username","password","decodeBase64String","header","parts","split","securitySetCookie","stringValue","appendPreResponseHandler","_req","setCookie","secure","httpOnly"],"sources":["../../src/HttpApiBuilder.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}