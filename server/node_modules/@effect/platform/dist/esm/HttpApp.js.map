{"version":3,"file":"HttpApp.js","names":["Context","Effect","Exit","FiberRef","Layer","Runtime","Scope","unify","ServerError","ServerRequest","ServerResponse","internal","internalMiddleware","handledSymbol","Symbol","for","toHandled","self","handleResponse","middleware","responded","withFiberRuntime","fiber","flatMap","response","request","unsafeGet","currentContext","HttpServerRequest","handler","getFiberRef","currentPreResponseHandlers","_tag","as","tap","value","withErrorHandling","catchAllCause","cause","causeResponse","zipRight","failCause","withMiddleware","undefined","tracer","matchCauseEffect","onFailure","void","_cause","empty","status","onSuccess","uninterruptible","scoped","appendPreResponseHandler","withPreResponseHandler","toWebHandlerRuntime","runtime","run","runFork","resolveSymbol","httpApp","toWeb","withoutBody","method","context","Promise","resolve","contextMap","Map","unsafeMap","isContext","key","set","httpServerRequest","fromWeb","locally","unsafeMake","signal","addEventListener","unsafeInterruptAsFork","clientAbortFiberId","once","toWebHandler","defaultRuntime","toWebHandlerLayer","layer","scope","runSync","make","close","runPromise","build","map","toRuntime","_","runner","extend","then"],"sources":["../../src/HttpApp.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}